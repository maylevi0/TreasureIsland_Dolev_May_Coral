@using TreasureIsland_Dolev_May_Coral.Shared.Entities
@inject HttpClient Http

<MudDialog>
    <DialogContent>
        @if (GameFromPage.IsPublish == false)
        {<MudText>
                המשחק "@gameCurrentName" פורסם בהצלחה.
        <br/>
                הקוד למשחק הוא: @GameCode
            </MudText>
        }
        else
        {
    <MudText>
        המשחק "@gameCurrentName" אינו מפורסם כעת
    </MudText>
        }

    </DialogContent>
    <DialogActions>
        <MudButton Style="background-color:saddlebrown; color:azure" @onclick="OkFunc" Color="Color.Primary" Variant="Variant.Filled">אישור </MudButton>

        <MudButton OnClick="Cancel">ביטול הפעולה</MudButton>
    </DialogActions>
</MudDialog>

@code {



    [Parameter]
    public int userId { get; set; }

    [Parameter]
    public Game GameFromPage { get; set; } // פרמטר שמתקבל מהדף


    //יצירת מופע חדש של משחק
    Game UpdatedGame = new Game(); //מופע מקומי של המשחק

    string gameCurrentName = "";

    string GameCode = "";

    [CascadingParameter] MudDialogInstance MudDialog { get; set; }

    protected override void OnInitialized()
    {

        gameCurrentName = GameFromPage.GameName;
        GameCode = GameFromPage.GameCode.ToString(); ;
        Console.WriteLine("gameCurrentName : " + gameCurrentName);
        Console.WriteLine("GameCode : " + GameCode);
    }

    private void Cancel()
    {
        if (GameFromPage.IsPublish == false)
        {
            GameFromPage.IsPublish = true;
        }
        else {
        GameFromPage.IsPublish = false; }
        MudDialog.Cancel();

    }

    private void OkFunc()
    {

        MudDialog.Close(DialogResult.Ok(true));

    }

}
